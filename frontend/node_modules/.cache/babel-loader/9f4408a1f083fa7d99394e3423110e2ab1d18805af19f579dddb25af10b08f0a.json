{"ast":null,"code":"// src/components/ManageUsers.jsx\nimport React,{useEffect,useState}from'react';import userServices from'../services/userServices';// Ensure correct case here\nimport{useAuth}from'../context/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ManageUsers=()=>{const{user}=useAuth();// Get user from AuthContext\nconst[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchUsers=async()=>{setError(null);// Reset error state before fetching\ntry{const fetchedUsers=await userServices.getAllUsers();setUsers(fetchedUsers);}catch(error){setError(error.message);}finally{setLoading(false);}};// Only fetch users if the user is an Admin\nif(user&&user.coordinator&&user.coordinator.coor_role==='Admin'){fetchUsers();}else{setLoading(false);// Set loading to false if not Admin\n}},[user]);const handleDeleteUser=async userId=>{if(window.confirm('Are you sure you want to delete this user?')){try{await userServices.deleteUser(userId);// Ensure this method is implemented in UserServices\nsetUsers(users.filter(u=>u.id!==userId));// Remove deleted user from state\n}catch(error){setError(error.message);}}};if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading users...\"});if(error)return/*#__PURE__*/_jsxs(\"p\",{children:[\"Error: \",error]});return/*#__PURE__*/_jsxs(\"div\",{className:\"manage-users\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Manage Users\"}),users.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"No users found.\"}):/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(_ref=>{let{id,coor_fname,coor_lname,coor_email,coor_role}=_ref;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:id}),/*#__PURE__*/_jsx(\"td\",{children:`${coor_fname} ${coor_lname}`}),/*#__PURE__*/_jsx(\"td\",{children:coor_email}),/*#__PURE__*/_jsx(\"td\",{children:coor_role}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteUser(id),children:\"Delete\"})})]},id);})})]})]});};export default ManageUsers;","map":{"version":3,"names":["React","useEffect","useState","userServices","useAuth","jsx","_jsx","jsxs","_jsxs","ManageUsers","user","users","setUsers","loading","setLoading","error","setError","fetchUsers","fetchedUsers","getAllUsers","message","coordinator","coor_role","handleDeleteUser","userId","window","confirm","deleteUser","filter","u","id","children","className","length","map","_ref","coor_fname","coor_lname","coor_email","onClick"],"sources":["C:/Users/marmeeluv/Desktop/capstone-final/frontend/src/components/ManageUsers.jsx"],"sourcesContent":["// src/components/ManageUsers.jsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport userServices from '../services/userServices'; // Ensure correct case here\r\nimport { useAuth } from '../context/AuthContext';\r\n\r\nconst ManageUsers = () => {\r\n    const { user } = useAuth(); // Get user from AuthContext\r\n    const [users, setUsers] = useState([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const fetchUsers = async () => {\r\n            setError(null); // Reset error state before fetching\r\n            try {\r\n                const fetchedUsers = await userServices.getAllUsers();\r\n                setUsers(fetchedUsers);\r\n            } catch (error) {\r\n                setError(error.message);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        // Only fetch users if the user is an Admin\r\n        if (user && user.coordinator && user.coordinator.coor_role === 'Admin') {\r\n            fetchUsers();\r\n        } else {\r\n            setLoading(false); // Set loading to false if not Admin\r\n        }\r\n    }, [user]);\r\n\r\n    const handleDeleteUser = async (userId) => {\r\n        if (window.confirm('Are you sure you want to delete this user?')) {\r\n            try {\r\n                await userServices.deleteUser(userId); // Ensure this method is implemented in UserServices\r\n                setUsers(users.filter((u) => u.id !== userId)); // Remove deleted user from state\r\n            } catch (error) {\r\n                setError(error.message);\r\n            }\r\n        }\r\n    };\r\n\r\n    if (loading) return <p>Loading users...</p>;\r\n    if (error) return <p>Error: {error}</p>;\r\n\r\n    return (\r\n        <div className=\"manage-users\">\r\n            <h2>Manage Users</h2>\r\n            {users.length === 0 ? (\r\n                <p>No users found.</p>\r\n            ) : (\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>ID</th>\r\n                            <th>Name</th>\r\n                            <th>Email</th>\r\n                            <th>Role</th>\r\n                            <th>Actions</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {users.map(({ id, coor_fname, coor_lname, coor_email, coor_role }) => (\r\n                            <tr key={id}>\r\n                                <td>{id}</td>\r\n                                <td>{`${coor_fname} ${coor_lname}`}</td>\r\n                                <td>{coor_email}</td>\r\n                                <td>{coor_role}</td>\r\n                                <td>\r\n                                    <button onClick={() => handleDeleteUser(id)}>Delete</button>\r\n                                    {/* You can add edit/update functionality here */}\r\n                                </td>\r\n                            </tr>\r\n                        ))}\r\n                    </tbody>\r\n                </table>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ManageUsers;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}