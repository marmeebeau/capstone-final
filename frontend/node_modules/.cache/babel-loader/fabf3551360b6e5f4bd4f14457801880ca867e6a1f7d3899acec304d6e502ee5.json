{"ast":null,"code":"// src/context/AuthContext.jsx\nimport React,{createContext,useContext,useState}from'react';import authServices from'../services/authServices';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(()=>{try{const storedUserData=localStorage.getItem('user');console.log(\"Stored User Data in localStorage:\",storedUserData);// Log for debugging\nreturn storedUserData?JSON.parse(storedUserData):null;}catch(error){console.error(\"Failed to parse user data from local storage:\",error);return null;}});// Declare the logout function before returning the context\nconst logout=()=>{setUser(null);localStorage.removeItem('token');localStorage.removeItem('user');console.log(\"User logged out\");// Log for debugging\n};const login=async(identifier,password)=>{try{const{user,token}=await authServices.login(identifier,password);setUser(user);localStorage.setItem('token',token);localStorage.setItem('user',JSON.stringify(user));console.log(\"User logged in:\",user);// Log for debugging\n}catch(error){console.error(\"Login failed:\",error);throw error;}};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,login,logout},children:children});};// Hook to use the AuthContext\nexport const useAuth=()=>useContext(AuthContext);","map":{"version":3,"names":["React","createContext","useContext","useState","authServices","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","storedUserData","localStorage","getItem","console","log","JSON","parse","error","logout","removeItem","login","identifier","password","token","setItem","stringify","Provider","value","useAuth"],"sources":["C:/Users/marmeeluv/Desktop/capstone-final/frontend/src/context/AuthContext.js"],"sourcesContent":["// src/context/AuthContext.jsx\r\nimport React, { createContext, useContext, useState } from 'react';\r\nimport authServices from '../services/authServices';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState(() => {\r\n        try {\r\n            const storedUserData = localStorage.getItem('user');\r\n            console.log(\"Stored User Data in localStorage:\", storedUserData); // Log for debugging\r\n            return storedUserData ? JSON.parse(storedUserData) : null;\r\n        } catch (error) {\r\n            console.error(\"Failed to parse user data from local storage:\", error);\r\n            return null;\r\n        }\r\n    });\r\n\r\n    // Declare the logout function before returning the context\r\n    const logout = () => {\r\n        setUser(null);\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        console.log(\"User logged out\"); // Log for debugging\r\n    };\r\n\r\n    const login = async (identifier, password) => {\r\n        try {\r\n            const { user, token } = await authServices.login(identifier, password);\r\n            setUser(user);\r\n            localStorage.setItem('token', token);\r\n            localStorage.setItem('user', JSON.stringify(user));\r\n            console.log(\"User logged in:\", user); // Log for debugging\r\n        } catch (error) {\r\n            console.error(\"Login failed:\", error);\r\n            throw error;\r\n        }\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, login, logout }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\n// Hook to use the AuthContext\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,UAAU,CAAEC,QAAQ,KAAQ,OAAO,CAClE,MAAO,CAAAC,YAAY,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEpD,KAAM,CAAAC,WAAW,cAAGN,aAAa,CAAC,CAAC,CAEnC,MAAO,MAAM,CAAAO,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACrC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAM,CACnC,GAAI,CACA,KAAM,CAAAU,cAAc,CAAGC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CACnDC,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAEJ,cAAc,CAAC,CAAE;AAClE,MAAO,CAAAA,cAAc,CAAGK,IAAI,CAACC,KAAK,CAACN,cAAc,CAAC,CAAG,IAAI,CAC7D,CAAE,MAAOO,KAAK,CAAE,CACZJ,OAAO,CAACI,KAAK,CAAC,+CAA+C,CAAEA,KAAK,CAAC,CACrE,MAAO,KAAI,CACf,CACJ,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,MAAM,CAAGA,CAAA,GAAM,CACjBT,OAAO,CAAC,IAAI,CAAC,CACbE,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC,CAChCR,YAAY,CAACQ,UAAU,CAAC,MAAM,CAAC,CAC/BN,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC,CAAE;AACpC,CAAC,CAED,KAAM,CAAAM,KAAK,CAAG,KAAAA,CAAOC,UAAU,CAAEC,QAAQ,GAAK,CAC1C,GAAI,CACA,KAAM,CAAEd,IAAI,CAAEe,KAAM,CAAC,CAAG,KAAM,CAAAtB,YAAY,CAACmB,KAAK,CAACC,UAAU,CAAEC,QAAQ,CAAC,CACtEb,OAAO,CAACD,IAAI,CAAC,CACbG,YAAY,CAACa,OAAO,CAAC,OAAO,CAAED,KAAK,CAAC,CACpCZ,YAAY,CAACa,OAAO,CAAC,MAAM,CAAET,IAAI,CAACU,SAAS,CAACjB,IAAI,CAAC,CAAC,CAClDK,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAEN,IAAI,CAAC,CAAE;AAC1C,CAAE,MAAOS,KAAK,CAAE,CACZJ,OAAO,CAACI,KAAK,CAAC,eAAe,CAAEA,KAAK,CAAC,CACrC,KAAM,CAAAA,KAAK,CACf,CACJ,CAAC,CAED,mBACId,IAAA,CAACC,WAAW,CAACsB,QAAQ,EAACC,KAAK,CAAE,CAAEnB,IAAI,CAAEY,KAAK,CAAEF,MAAO,CAAE,CAAAX,QAAA,CAChDA,QAAQ,CACS,CAAC,CAE/B,CAAC,CAED;AACA,MAAO,MAAM,CAAAqB,OAAO,CAAGA,CAAA,GAAM7B,UAAU,CAACK,WAAW,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}